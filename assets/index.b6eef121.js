import{r as i,u as C,c as e,j as o,f as L,z as S}from"./vendor.27cd92a7.js";import{u as B,h as $,L as E,I as R,R as b}from"./index.e68e4af5.js";import{l as p,E as l}from"./index.29c54872.js";const k=()=>{const[h,y]=i.exports.useState([]),[c,g]=i.exports.useState(),[r,I]=i.exports.useState(localStorage.getItem(p)||l.LIST),{state:{currentUser:t,myRegisters:v}}=B(),u=C(),d=i.exports.useCallback(async()=>{if(t!=null&&t.phone){const{courseList:s,totalNum:a}=await $(t==null?void 0:t.phone);y(s),g(a)}},[t==null?void 0:t.phone]);if(i.exports.useEffect(()=>{d()},[d]),!(t!=null&&t.phone))return u("/"),null;const N=s=>{const a=S(v,({courseId:x})=>x===s.courseId),n=a.status,f=`https://room.os2edu.cn?username=${a.name}&userId=${t.phone}&role=${b[n]||"student"}&roomId=${s.roomId}&video=${s.ishd||"480p"}`;window.open(f)},m=r===l.GRID;return e("div",{className:"mycourse-list-wrapper",children:[e("header",{children:[o("div",{className:"title",children:"\u6211\u7684\u8BFE\u7A0B"}),e("div",{className:"totol-register-count",children:["\u5171\u62A5\u540D\u8BFE\u7A0B: ",o("strong",{children:c})]})]}),c===void 0?o(E,{}):e("div",{className:`mycourse-list ${m?"mycourse-list-layout-grid":"mycourse-list-layout-list"}`,children:[o("span",{className:"layout-icon",onClick:()=>{const s=m?l.LIST:l.GRID;I(s),localStorage.setItem(p,s)},children:o(R,{symbol:r===l.GRID?"icon-listgrid":"icon-list"})}),L(h,(s,a)=>e("div",{className:"course-item",onClick:()=>u(`/${s.courseId}`),children:[o("img",{className:"course-item-cover",src:s.coverUrl,alt:"cover"}),e("div",{className:"course-item-content",children:[e("div",{children:[o("h3",{children:s.title}),o("div",{className:"summary",children:s.summary})]}),e("div",{className:"room",children:[e("span",{children:[" \u6559\u5BA4\u53F7: ",s.roomId," "]}),o("button",{className:"btn enter-class-btn",onClick:n=>{n.stopPropagation(),N(s)},children:"\u8FDB\u5165\u8BFE\u5802"})]})]})]},s.id+s.courseIndex+s.title+a))]})]})};export{k as default};
